@page "/consultations"
@layout MainLayout
@inject HttpClient HttpClient

<PageTitle>Consultations</PageTitle>

<MudGrid>
    <MudItem md="12">
        <MudText Typo="Typo.h4" GutterBottom="true">Consultations</MudText>
    </MudItem>
    @if (consultations is null || !consultations.Any())
    {
        <MudItem md="12">
            <MudAlert Severity="Severity.Info">At the moment you do not have any consultation.</MudAlert>
        </MudItem>
    }
    else
    {
        <Virtualize Items="consultations" Context="consultation">
            <MudItem md="3">
                <MudCard>
                    <MudCardContent>
                        <MudText>Details : @consultation.Description</MudText>
                    </MudCardContent>
                </MudCard>
            </MudItem>
        </Virtualize>
    }
</MudGrid>


@code {
    private List<ConsultationDto> consultations;

    protected override async Task OnInitializedAsync()
    {
        await GetConsultations();

        StateHasChanged();

        await base.OnInitializedAsync();
    }

    public async Task GetConsultations()
    {
        consultations = await HttpClient.GetFromJsonAsync<List<ConsultationDto>>("api/consultations");
    }


}
